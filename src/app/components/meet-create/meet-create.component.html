<ion-header>
  <ion-toolbar>
    <ion-title>Termin erstellen</ion-title>
  </ion-toolbar>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="dismiss()">Abbrechen</ion-button>
    </ion-buttons>
    <ion-buttons slot="end">
      <ion-button (click)="createMeet()" [disabled]="meetCreateGroup.invalid"
        >Termin hinzuf체gen</ion-button
      >
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content>
  <form [formGroup]="meetCreateGroup">
    <ion-item>
      <ion-label position="inline"><ion-text color="danger">*</ion-text></ion-label>
      <ion-input placeholder="Titel" formControlName="meetName"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label position="inline"><ion-text color="danger">*</ion-text></ion-label>
      <ion-input placeholder="Treffpunkt" formControlName="meetLocation"></ion-input>
    </ion-item>
    <ion-item>
      <ion-input placeholder="Bemerkungen" formControlName="meetComment"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label position="inline"><ion-text color="danger">*</ion-text></ion-label>
      <ion-input placeholder="Deadline" formControlName="meetDeadline"></ion-input>
      <ion-note slot="end">Tage vorher eintragen</ion-note>
    </ion-item>
    <ion-item>
      Ohne Zeitangabe
      <ion-checkbox slot="end" formControlName="provisionally"></ion-checkbox>
    </ion-item>
    <ion-item *ngIf="meetProvisionally?.value">
      <ion-label class="ion-text-wrap">
        <ion-text color="medium">
          Provisorische Termine haben nur ein Datum und noch keine Zeitangabe. (F체lle sie trotzdem
          aus, den Mitgliedern wird die Zeit nicht angezeigt.)
        </ion-text>
      </ion-label>
    </ion-item>
    <div class="grid-item">
      <ion-datetime
        placeholder="Datum ausw채hlen"
        display-format="HH:mm"
        [min]="today"
        formControlName="meetDate"
        presentation="date-time"
        display="numpad"
        size="cover"
        hourCycle="h23"
        [firstDayOfWeek]="1"
      >
        <ion-label slot="time-label">Startzeit</ion-label>
      </ion-datetime>
      <div class="datetime-time">
        <ion-datetime
          placeholder="Zeit ausw채hlen"
          display-format="HH:mm"
          formControlName="meetEndTime"
          presentation="time"
          display="numpad"
          size="cover"
          hourCycle="h23"
        >
          <ion-label slot="time-label">Endzeit</ion-label>
        </ion-datetime>
      </div>
    </div>
    <ion-accordion-group>
      <ion-accordion>
        <ion-item slot="header">
          <ion-label>Slots</ion-label>
        </ion-item>
        <ion-list slot="content">
          <ion-item>
            Limitierte Slots
            <ion-checkbox slot="end" formControlName="limitedSlots"></ion-checkbox>
          </ion-item>
          <ion-item *ngIf="meetCreateGroup.value.limitedSlots">
            <ion-label position="stacked">Slots</ion-label>
            <ion-input
              type="number"
              placeholder="Slots"
              required
              formControlName="slots"
            ></ion-input>
          </ion-item>
        </ion-list>
      </ion-accordion>
    </ion-accordion-group>
  </form>
  <!-- <ion-accordion-group>
    <ion-accordion>
      <ion-item slot="header">
        <ion-label>Aufgaben</ion-label>
      </ion-item>
      <ion-list slot="content">
        <app-task-manager [(meet)]="meet" showCreateForm="true"></app-task-manager>
      </ion-list>
    </ion-accordion>
  </ion-accordion-group> -->
  <form class="ion-margin-bottom" [formGroup]="teamSelectionForm">
    <ion-accordion-group>
      <ion-accordion>
        <ion-item slot="header">
          <ion-label>Teams</ion-label>
        </ion-item>

        <ion-list formArrayName="teams" slot="content">
          <ion-item *ngFor="let team of teams; index as i">
            {{ team.name }}
            <ion-checkbox slot="end" [formControlName]="i"></ion-checkbox>
          </ion-item>
        </ion-list>
      </ion-accordion>
    </ion-accordion-group>
  </form>
</ion-content>
